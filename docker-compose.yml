version: '3.9'
services:
  front:
    image: mjerkic/tool-exchange-front
    ports:
      - 80:80
  service:
    image: mjerkic/tool-exchange-service
    environment:
      - SPRING_DATASOURCE_URL=jdbc:postgresql://db:5000/tooldb
    ports:
      - 8080:8080
    links:
      - db
  db:
      image: postgres
      container_name: db
      environment:
        POSTGRES_USER: toolexchange
        POSTGRES_PASSWORD: toolexchange
        POSTGRES_DB: tooldb
        PGDATA: /var/lib/postgresql/data/dbdata
      ports:
        - 5000:5432
      volumes:
        - dbdata:/var/lib/postgresql/data
      restart: always
volumes:
  dbdata: